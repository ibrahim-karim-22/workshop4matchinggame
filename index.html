<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="author" content="Ibrahim Karim" />
  <title>Matching Game</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="node_modules/bootstrap/dist/css/bootstrap.min.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Play:wght@700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/node_modules/@fortawesome/fontawesome-free/css/fontawesome.css" />
  <link rel="stylesheet" href="/node_modules/@fortawesome/fontawesome-free/css/brands.css" />
  <link rel="stylesheet" href="/node_modules/@fortawesome/fontawesome-free/css/solid.css" />
  <style>
    body {
      background-color: black;
    }

    .pageTitle {
      text-align: center;
      color: rgb(0, 0, 125);
      text-shadow: aliceblue 1px 1px;
      font-family: 'Play', sans-serif;
      font-size: 55px;
    }

    .par1 {
      text-align: center;
      color: blue;
      text-shadow: black 3px 2px;
      font-size: 22px;
    }

    .containerDiv {
      background-image: url(https://media2.giphy.com/media/v1.Y2lkPTc5MGI3NjExbXQ2YnZyaTNrM3UxeGhydDBwdG8wemo3NWl5Zm9qY3hyMmRscHF0eSZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9cw/DZQyphCCVVCCzTVaW1/giphy.gif);
      background-size: contain;
      background-repeat: no-repeat;
      background-size: 500px 500px;
    }

    #rightSide img,
    #leftSide img {
      position: absolute;
    }
    .mainDiv {
      position: absolute;
      width: 500px;
      height: 500px;
    }


    #rightSide {
      left: 500px;
      border-left: 5px solid;
      border-color: aliceblue;
    }

    .startBtn {
      position: relative;
      /* Set container to relative positioning */
      display: inline-block;
      /* Make container inline-block to allow overlapping */
    }

    .startBtn button {
      position: relative;
      /* Set button to relative positioning */
      z-index: 0;
      /* Ensure button appears on top */
    }

    .titleImg1 {
      position: absolute;
      /* Set image to absolute positioning */
      top: 0;
      /* Align image to the top of the container */
      right: 22%;
      /* Move image to the right by 50% of the container width */
      transform: translateX(-50%);
      /* Adjust image position to center it horizontally */
      z-index: 1;
      /* Ensure image appears below button */
    }

    .titleImg2 {
      position: absolute;
      /* Set image to absolute positioning */
      top: 0;
      /* Align image to the top of the container */
      right: -33%;
      /* Move image to the right by 50% of the container width */
      transform: translateX(-44%);

      transform: translateY(-3%);
      /* Adjust image position to center it horizontally */
      z-index: 0;
      /* Ensure image appears below button */
    }
    .titleImg3 {
      position: absolute;
      /* Set image to absolute positioning */
      top: 0;
      /* Align image to the top of the container */
      right: 11%;
      /* Move image to the right by 50% of the container width */
      transform: translateX(-1%);

      transform: translateY(144%);
      /* Adjust image position to center it horizontally */
      z-index: 0;
      /* Ensure image appears below button */
    }
    .titleImg4 {
      position: absolute;
      right:11%;
      transform: translateY(1%);
      z-index: 0;
    }
    .titleImg5 {
      position: absolute;
      right:24%;
      transform: translateY(1%);
      z-index: 0;
    }
    .titleImg6 {
      position: absolute;
      left: 36%;
      transform: translateY(-5%);
      z-index: -1;
      transform: translateX(-44%);
    }
    .titleImg7 {
      position: absolute;
      /* Set image to absolute positioning */
      top: 0;
      /* Align image to the top of the container */
      left: 11%;
      /* Move image to the right by 50% of the container width */
      transform: translateX(-1%);

      transform: translateY(144%);
      /* Adjust image position to center it horizontally */
      z-index: 0;
      /* Ensure image appears below button */
    }
    .titleImg8 {
      position: absolute;
      /* Set image to absolute positioning */
      top: 0;
      /* Align image to the top of the container */
      right: 90%;
      /* Move image to the right by 50% of the container width */
      transform: translateX(-50%);
      transform: translateY(222%);
      /* Adjust image position to center it horizontally */
      z-index: 1;
      /* Ensure image appears below button */
    }
    .titleImg9 {
      position: absolute;
      /* Set image to absolute positioning */
      top: 0;
      /* Align image to the top of the container */
      right: 90%;
      /* Move image to the right by 50% of the container width */
      transform: translateX(-50%);
      transform: translateY(345%);
      /* Adjust image position to center it horizontally */
      z-index: 1;
      /* Ensure image appears below button */
    }
    .titleImg10 {
      position: absolute;
      /* Set image to absolute positioning */
      top: 0;
      /* Align image to the top of the container */
      left: 51%;
      /* Move image to the right by 50% of the container width */
      transform: translateX(-22%);
      transform: translateY(-11%);
      /* Adjust image position to center it horizontally */
      z-index: 1;
      /* Ensure image appears below button */
    }
    .startBtnContainer {
      text-align: center;
      /* Center inline-block container */
    }

    .buttonsBg {
      text-align: center;
    }

    .attempts {
      text-align: end;
    }

    #attDisplay {
      text-align: end;
    }

    .settingsBtn {
      position: relative;
      /* Set container to relative positioning */
      display: inline-block;
      /* Make container inline-block to allow overlapping */
    }

    .settingsBtn {
      position: relative;
      /* Set button to relative positioning */
      z-index: 0;
      /* Ensure button appears on top */
    }

    .settingsBtnContainer {
      text-align: center;
    }

    .infoBtn {
      position: relative;
      /* Set container to relative positioning */
      display: inline-block;
      /* Make container inline-block to allow overlapping */
    }

    .infoBtn {
      position: relative;
      /* Set button to relative positioning */
      z-index: 0;
      /* Ensure button appears on top */
    }

    .infoBtnContainer {
      text-align: center;
    }

    .menuBtn {
      position: relative;
      /* Set container to relative positioning */
      display: inline-block;
      /* Make container inline-block to allow overlapping */
    }

    .menuBtn {
      position: relative;
      /* Set button to relative positioning */
      z-index: 0;
      /* Ensure button appears on top */
    }

    .menuBtnContainer {
      text-align: center;
    }
    .strt {
      width: 444px;
    }
    .stngs {
      width: 444px;
    }
    .inf {

       width: 444px;
    }
  </style>
</head>
<body>
  <h1 class="pageTitle">MatchingGame  <span class="titleImg10">
        <img
          src="https://media1.giphy.com/media/cp19FIwkzkfY8O2Vm7/giphy.gif?cid=ecf05e47lhp7m51jdqsydxnab2cpj38618mny7746ocjxuj8&ep=v1_gifs_related&rid=giphy.gif&ct=s" width="55px"/>
  </span>SmileGame</h1><span id="timer" class="text-primary">0</span>
  <div class="startBtnContainer">
    <div class="startBtn">
       <div class="titleImg1">
        <img
          src="https://media4.giphy.com/media/shCMfW4kOHdDi/giphy.gif?cid=ecf05e47gbg6xolaj1xrz12dzhmmkrs86zbvootefif461hb&ep=v1_gifs_related&rid=giphy.gif&ct=s" width="222px" />
      </div>
      <div class="titleImg2">
        <img
          src="https://media2.giphy.com/media/AoFwZ9cx7FcWY/giphy.gif?cid=ecf05e47n99l3z6is5o7ezmhi1lkv70fu83vrzts1ajnonfi&ep=v1_gifs_related&rid=giphy.gif&ct=s" width="155px" />
      </div>
      <div class="titleImg3">
        <img
          src="https://media3.giphy.com/media/v1.Y2lkPTc5MGI3NjExNWZxdHBvN29vdG4zeDRoYTl5ZXViazR3MWd1dm12dWRpaHA1Mmt3eCZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9cw/2VVvpkyyym5FOrHQG3/giphy.gif" width= "200px" />
      </div>

      <div class="titleImg4">
        <img
          src="https://media0.giphy.com/media/l46Cpss7mfcEftf56/giphy.gif?cid=ecf05e4795gaz3v5pyv86pxnre7j2d6odmjnhnbrbjne7h84&ep=v1_gifs_related&rid=giphy.gif&ct=s" width="199px" />
      </div>
      <div class="titleImg5">
        <img
          src="https://media2.giphy.com/media/AijPLJTLd1FoLqyLUp/giphy.gif?cid=ecf05e47dy1242bz796vtqf2ofs1r8ca3hau6gpabyjvtaw0&ep=v1_gifs_related&rid=giphy.gif&ct=s" width="199px" />
      </div>
      <div class="titleImg6">
        <img
          src="https://media2.giphy.com/media/pWhWtKdqwOAco/giphy.webp?cid=ecf05e47ap4p4bwny9xbvnw2tjr68o2voe2d4ocuptg4uiyf&ep=v1_gifs_related&rid=giphy.webp&ct=g" width="1000px" height="500px" />
      </div>
      <div class="titleImg7">
        <img
          src="https://media0.giphy.com/media/p94nK1krMpGIkJYYJv/giphy.gif?cid=ecf05e47t6ywjjanrok2r8504p2f2yn0hiedwxxnzd90w1kn&ep=v1_gifs_related&rid=giphy.gif&ct=s" width= "200px" />
      </div>
      <div class="titleImg8">
        <img
          src="https://media0.giphy.com/media/v1.Y2lkPTc5MGI3NjExZWNlaGZvNnIwemNhc3RtdGd1enRlb210Z29hM2l3anlobWMxM2FibyZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9cw/pUjFF6SVlR5OeKEqCY/giphy.gif" width="33px"/>
      </div>
      <div class="titleImg9">
        <img
          src="https://media4.giphy.com/media/T6oln8tuKfrrE7Wh47/giphy.gif?cid=ecf05e47t7jyb7iuteaqd30zsu9or7qrfsk0hl8ai1m5wscn&ep=v1_gifs_related&rid=giphy.gif&ct=s" width="33px"/>
      </div>
      <button id="startButton" class="btn btn-danger btn-lg mb-3 strt">Start Game!</button>
    </div>
  </div>
  <div class="settingsBtnContainer">
    <div class="settingsBtn">
      <button id="settingsButton" class="btn btn-danger btn-lg mb-3 stngs">Settings!</button>
    </div>
  </div>
  <div class="infoBtnContainer">
    <div class="infoBtn">
      <button id="infoButton" class="btn btn-danger btn-lg inf">Info!</button>
    </div>
  </div>
  <div class="buttonsBg">
    <img
      src="https://media3.giphy.com/media/v1.Y2lkPTc5MGI3NjExOG9haXAyMWVma2hxZTd0cHA5M3o4NDBxbmc1azVrdnJsa2lic3F5NCZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9cw/JLGhqNoi9xsnS/giphy.gif" width="833px">
  </div>
  </div>
  <div class="menuBtnContainer">
    <div class="menuBtn">
      <button id="menuButton" class="btn btn-warning">Main Menu!</button>
    </div>
  </div>
  <p class="par1 mt-5">Click on the extra image on the left. Do not click anywhere else.</p>
  <div id="gameArea">
    <div id="leftSide" class="mainDiv containerDiv"></div>
    <div id="rightSide" class="mainDiv containerDiv"></div>
  </div>
  <div class="attemptsContainer">
    <h2 class="attempts text-light">Level: </h2>
    <h2 id="attDisplay" class="text-light">1</h2>
  </div>
  <script src="node_modules/bootstrap/dist/js/bootstrap.bundle.js"></script>
  <script>
    let numberOfFaces = 5;
    const theLeftSide = document.querySelector("#leftSide");
    const theRightSide = document.querySelector("#rightSide");
    const theGameArea = document.querySelector("#gameArea");
    const theAttDisplay = document.querySelector("#attDisplay");
    const theStartBtnContainer = document.querySelector(".startBtnContainer");
    const theSettingsBtnContainer = document.querySelector(".settingsBtnContainer");
    const theInfoBtnContainer = document.querySelector(".infoBtnContainer");
    const theMenuBtnContainer = document.querySelector(".menuBtnContainer");
    const theButtonsBg = document.querySelector(".buttonsBg");
    const timerSpan = document.querySelector('#timer'); 
    theGameArea.style.display = "none";
    theMenuBtnContainer.style.display = "none";

    let timer;
    let timeLeft = 60;
    let userName;
    let gameHasStarted = false;

    document.querySelector("#startButton").addEventListener("click", startGame);
    document.querySelector("#menuButton").addEventListener("click", mainMenuPress);

    function startGame() {
      if (gameHasStarted) {
        return;
      }
      resetGame()
      userName = prompt('Enter Name:');
      console.log(userName);
      clearInterval(timer);
    //reset time left for a new game
    timeLeft = 60;
    //resets the timer display to 60 for a new start.
    timerSpan.innerHTML = timeLeft;
    //starts the interval to update the timer every second.
    timer = setInterval(updateTimer, 1000);
    
    isGameStarted = true;//indicates the game has started 
      gameHasStarted = true;
      theGameArea.style.display = "block";
      theStartBtnContainer.style.display = "none";
      theSettingsBtnContainer.style.display = "none";
      theInfoBtnContainer.style.display = "none";
      theButtonsBg.style.display = "none";
      theMenuBtnContainer.style.display = "block";
      generateFaces();
    }
    function resetGame() {
      gameHasStarted = false;
      numberOfFaces = 5;
      theAttDisplay.textContent = '1'; // Reset attempt display
      theLeftSide.innerHTML = ""; // Clear left side of faces
      theRightSide.innerHTML = ""; // Clear right side of faces
      clearInterval(timer);
      timerSpan.innerHTML = 60; //changed to 60 instead of zero, so that it would display 60 before start game.

    isGameStarted = false; // game ended, ready for new start
    }

    function mainMenuPress() {
      resetGame();
      theStartBtnContainer.style.display = "block";
      theSettingsBtnContainer.style.display = "block";
      theInfoBtnContainer.style.display = "block";
      theButtonsBg.style.display = "block";
      theMenuBtnContainer.style.display = "none";
      theGameArea.style.display = "none";
      generateFaces();
    }

    // window.addEventListener('load', generateFaces); Im going to add a button

    document.querySelector("#gameArea").addEventListener("click", gameOver);

    function generateFaces() {
      if (!gameHasStarted) {
        return;
      }

      for (let i = 0; i < numberOfFaces; i++) {
        let face = document.createElement("img");
        face.src =
          "https://media3.giphy.com/media/v1.Y2lkPTc5MGI3NjExdm9kYWsyajRpNmNvMHlwYm5rZWN4M2g1NW9ydXcxaHQ3NW9nNGRmdSZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9cw/JLGhqNoi9xsnS/giphy.gif";
        face.style.width = "111px";
        let randomTop = Math.floor(Math.random() * 400) + 1;
        let randomLeft = Math.floor(Math.random() * 400) + 1;
        face.style.top = randomTop + "px";
        face.style.left = randomLeft + "px";
        theLeftSide.appendChild(face);
      }
      const leftSideImages = theLeftSide.cloneNode(true);
      leftSideImages.removeChild(leftSideImages.lastChild);
      theRightSide.appendChild(leftSideImages);

      theLeftSide.lastChild.addEventListener("click", nextLevel);
      // document.body.addEventListener("click", gameOver);
    }
    function gameOver() {
      if (!gameHasStarted) {
        return;
      }
      alert("Game Over!" + userName + ", you have reached " + theAttDisplay.textContent + "levels!");
      mainMenuPress()
      gameHasStarted = false;

      document.body.removeEventListener("click", gameOver);
      theLeftSide.lastChild.removeEventListener("click", nextLevel);
    }
    function nextLevel(event) {
      if (!gameHasStarted) {
        return;
      }

      event.stopPropagation();
      numberOfFaces += 5;
      while (theLeftSide.firstChild) {
        theLeftSide.removeChild(theLeftSide.firstChild);
      }
      while (theRightSide.firstChild) {
        theRightSide.removeChild(theRightSide.firstChild);
      }
      generateFaces();
      countAttempts();
    }
    function countAttempts() {
      if (!gameHasStarted) {
        return;
      }

      const currentAttempt = parseInt(theAttDisplay.textContent, 10) || 0;
      const newAttempt = currentAttempt + 1;
      theAttDisplay.textContent = newAttempt;
    }
    ///timer///

function updateTimer() {
    if(timeLeft > 0) {
        timeLeft = timeLeft - 1;
        timerSpan.innerHTML = timeLeft;
    } else {
        gameOver();
        resetGame();
        //no need to reset the timerSpan here as endGame already sets it to 60. this was why it was glitching and not stopping with end game when start is pressed twice i think.
        //timerSpan.innerHTML = 60;
    }
}


  </script>
</body>

</html>